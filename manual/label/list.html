<!DOCTYPE html>
<html class='mb-landing' data-server='CN' lang='zh-Hans-CN'>
<head>
<meta charset='utf-8'>
<meta content='ie=edge' http-equiv='x-ua-compatible'>
<meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'>
<meta content='webkit' name='renderer'>
<title>列表调用标签-模板标签-JellyCMS</title>
<meta content='列表调用标签-模板标签' name='keywords'>
<meta content='列表调用标签-模板标签' name='description'>
<link rel="stylesheet" href="/static/layui/css/layui.css">
<link rel="stylesheet" media="screen" href="/manual/css/manual.css" />
<link rel="stylesheet" href="/template/default/css/swiper.min.css">
<link rel="stylesheet" href="/template/default/css/animate.min.css">
<link rel="stylesheet" href="/static/font-awesome-4.7.0/css/font-awesome.min.css">
</head>
<body>
<div class="manual-wrap">
<header class="active other-page">
	<div class="header-container" style="width:100%;">
		<div class="header-left"><img src="/static/upload/20200824/1598266703_31cfb380618235447fe4.png"></div>
		<ul>
			<li><a  href='/'>首页</a></li>
			<li><a href='/manual/operation'>使用手册</a></li>
			<li><a class="active" href='/manual/label'>模板标签</a></li>
			<li><a href='/manual/develop'>二次开发</a></li>
			<li><a href='/manual/database'>数据字典</a></li>
			<li><a href='/manual/template'>模板入门</a></li>
		</ul>
		<div class="header-right"><a href="https://www.guodong.tech/" class="reg">国栋科技</a></div>
	</div>
</header>
<div class="manual">
 
		<div class="left">
			<ul class="layui-tree">

				<li><h2>基础说明</h2></li>
				<li class="site-tree-noicon"><a href="index.html"><cite>开始使用</cite><em>Getting Started</em></a></li>
				<li><h2>全局标签</h2></li>
				<li class="site-tree-noicon"><a href="company.html"><cite>公司信息</cite><em>{company:字段}</em></a></li>
				<li class="site-tree-noicon"><a href="site.html"><cite>站点信息</cite><em>{site:字段}</em></a></li>
				<li class="site-tree-noicon layui-this"><a href="list.html"><cite>列表标签</cite><em>{list:}{/list}</em></a></li>
				<li class="site-tree-noicon"><a href="content.html"><cite>内容标签</cite><em>{content:}{/content}</em></a></li>
				<li class="site-tree-noicon"><a href="link.html"><cite>友情链接</cite><em>{link:}</em></a></li>
				<li class="site-tree-noicon"><a href="slide.html"><cite>轮播/幻灯片</cite><em>{slide:}</em></a></li>
				<li class="site-tree-noicon"><a href="form.html"><cite>自定义表单</cite><em>{form:}</em></a></li>
				<li class="site-tree-noicon"><a href="advertisement.html"><cite>广告位</cite><em>{myad:}</em></a></li>
				<li class="site-tree-noicon"><a href="pics.html"><cite>多图调用标签</cite><em>{pics:}</em></a></li>
				<li class="site-tree-noicon"><a href="statistics.html"><cite>统计信息</cite><em>{statistics:}</em></a></li>
				<li class="site-tree-noicon"><a href="nav.html"><cite>栏目导航</cite><em>{nav:}{/nav}</em></a></li>
				<li class="site-tree-noicon"><a href="label.html"><cite>自定义标签</cite><em>{label:}</em></a></li>
				<li class="site-tree-noicon"><a href="area.html"><cite>区域调用</cite><em>{area:}{/area}</em></a></li>
				<li class="site-tree-noicon"><a href="theme.html"><cite>当前主题目录文件</cite><em>{theme:}</em></a></li>
				<li class="site-tree-noicon"><a href="webroot.html"><cite>网站根目录文件</cite><em>{webroot:}</em></a></li>
				<li class="site-tree-noicon"><a href="include.html"><cite>模板引入标签</cite><em>{include:}</em></a></li>
				<li><h2>列表页标签</h2></li>
				<li class="site-tree-noicon"><a href="list.html"><cite>列表调用</cite><em>{list:}</em></a></li>
				<li class="site-tree-noicon"><a href="pagebar.html"><cite>分页标签</cite><em>{pagebar:}</em></a></li>
				<li><h2>内容页标签</h2></li>
				<li class="site-tree-noicon layui-this"><a href="contents.html"><cite>内容标签</cite><em>{contents:}</em></a></li>
				<li class="site-tree-noicon"><a href="prevcontent.html"><cite>上一篇内容</cite><em>{pre:}</em></a></li>
				<li class="site-tree-noicon"><a href="nextcontent.html"><cite>下一篇内容</cite><em>{next:}</em></a></li>
			</ul>
		</div>
		<div class="right">
			<h1 class="site-h1">列表调用标签 - 模板标签</h1>
			<fieldset class="layui-elem-field layui-field-title site-title">
				<legend><a name="scope">适用范围</a></legend>
			</fieldset>
			<div class="site-text">
				<blockquote class="layui-elem-quote layui-quote-nm">
					全站任意地方均可使用，当list标签作为全局标签时，必须指定分类ID。<br>
					只有在列表页和内容页可不指定分类ID，不指定分类ID时，此标签将变成列表页标签
				</blockquote>
				<pre class="layui-code" lay-title="模板解析类View.php代码" lay-height="" lay-skin="" lay-encode="">//可指定多个ID id=1,2,3,4
case 'list:':
{
        $attr = $this->getAttrs($matches[4]);
        isset($attr['id'])? $id=$attr['id']:$id = '$sorts["id"]';//未设置id的，只能在列表页和内容页使用，以调取当前分类列表
        unset($attr['id']);
        //实现属性中符号表达式的问题
        $old_char=array(' eq ',' l ',' g ',' le ',' ge ', ' neq ');
        $new_char=array(' = ' ,' < ',' > ',' <= ',' >= ', ' !=  ');
        foreach($attr as $k => $v)
        {
                if(!in_array($k,self::$queryExcept))
                {
                        $v    = preg_replace('%(\$\w+\->\w+\[[\'|\"]\w+[\'|\"]\])%','{$1}',$v);//对变量处理增加花括号
                        $tem .= '"'.$k.'"=>"'.str_replace($old_char,$new_char,$v).'",';
                }
        }
        $params = '['.trim($tem, ',').']';
        return '<?php if(!isset($model)) $model = new \App\Models\ParseModel(); $data_ = $model->getList(array('.$id.'),'.$params.',$page); $pagebar = $data_["pagebar"]; foreach($data_["data"] as $key=>$list){?>';
}</pre>
				
			</div>
			<fieldset class="layui-elem-field layui-field-title site-title">
				<legend><a name="effect">标签作用</a></legend>
			</fieldset>
			<div class="site-text">
				<blockquote class="layui-elem-quote layui-quote-nm">
					用于调取指定列表信息，可调用多个分类下的信息列表
				</blockquote>
			</div>
			<fieldset class="layui-elem-field layui-field-title site-title">
				<legend><a name="way">调用方式</a></legend>
			</fieldset>
			<div class="site-text">
				
				<pre class="layui-code" lay-title="调用" lay-height="" lay-skin="" lay-encode="">    //可指定多个ID id=1,2,3,4
    {list:num=5 id=1,2,3 order=id desc where=id>0,status eq 1}
    <li>
        <a href="[list:link]">
            <div class="details">
                <h3 class="s">[list:title]</h3>
                <em></em>
                <p>[list:content len=100]</p>
                <h4><i class="fa fa-clock-o" aria-hidden="true"></i>[list:create_time style=Y年m月d日]</h4>
            </div>
        </a>
    </li>
    {/list}</pre>
				
				<blockquote class="layui-elem-quote layui-quote-nm">
					order：排序，多个排序条件用半角逗号隔开<br>
					where：过滤条件，多个过滤条件用半角逗号隔开<br>
					因模板解析类与含等号的表达式如' = ' ,' < ',' > ',' <= ',' >= ', ' !=  '会冲突，<br>
					这里使用伪表达式代替。等于:eq(equal) ; 小于:l(less than) ;大于:g(greater than); 小于等于:le ;大于等于:ge ;不等于:neq;<br>
					常用条件:<br>1.top eq 1:置顶;<br>2.recommend eq 1:推荐;<br>3.headline eq 1:头条;<br>4.pic neq '':有图片信息;<br>
					num:调用数量，默认5条<br>
				</blockquote>
			</div>
			<fieldset class="layui-elem-field layui-field-title site-title">
				<legend><a name="fields">可调用字段</a></legend>
			</fieldset>
			<div class="site-text">
				<table lay-filter="jellytable">
					<thead>
						<tr>
							<th lay-data="{field:'id', width:60,templet: '#id'}">序号</th>
							<th lay-data="{field:'name', sort:true}">字段名</th>
							<th lay-data="{field:'label'}">调用</th>
							<th lay-data="{field:'note'}">注释</th>
						</tr> 
					</thead>
					<tbody>
						<tr>
							<td></td>
							<td>id</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:id]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:id]" title="点击复制"></i>
								</div>
							</td>
							<td>文章ID</td>
						</tr>
						<tr>
							<td></td>
							<td>title</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:title]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:title]" title="点击复制"></i>
								</div>
							</td>
							<td>文章标题</td>
						</tr>
						<tr>
							<td></td>
							<td>area_id</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:area_id]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:area_id]" title="点击复制"></i>
								</div>
							</td>
							<td>区域ID</td>
						</tr>
						<tr>
							<td></td>
							<td>sorts_id</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:sorts_id]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:sorts_id]" title="点击复制"></i>
								</div>
							</td>
							<td>分类ID</td>
						</tr>
						<tr>
							<td></td>
							<td>subsort_id</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:subsort_id]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:subsort_id]" title="点击复制"></i>
								</div>
							</td>
							<td>子分类ID</td>
						</tr>
						<tr>
							<td></td>
							<td>color</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:color]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:color]" title="点击复制"></i>
								</div>
							</td>
							<td>标题颜色</td>
						</tr>
						<tr>
							<td></td>
							<td>subtitle</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:subtitle]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:subtitle]" title="点击复制"></i>
								</div>
							</td>
							<td>子标题</td>
						</tr>
						<tr>
							<td></td>
							<td>filename</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:filename]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:filename]" title="点击复制"></i>
								</div>
							</td>
							<td>附件</td>
						</tr>
						<tr>
							<td></td>
							<td>author</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:author]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:author]" title="点击复制"></i>
								</div>
							</td>
							<td>作者</td>
						</tr>
						<tr>
							<td></td>
							<td>source</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:source]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:source]" title="点击复制"></i>
								</div>
							</td>
							<td>来源</td>
						</tr>
						<tr>
							<td></td>
							<td>link</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:link]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:link]" title="点击复制"></i>
								</div>
							</td>
							<td>链接</td>
						</tr>
						<tr>
							<td></td>
							<td>date</td>
							<td>
								<div class="label">
									<span class="getlabel">[list:date]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:date]" title="点击复制"></i>
								</div>
							</td>
							<td>定时发布时间</td>
						</tr>
						<tr>
							<td></td>
							<td>pic</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:pic]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:pic]" title="点击复制"></i>
								</div>
							</td>
							<td>缩略图</td>
						</tr>
						<tr>
							<td></td>
							<td>pics</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:pics]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:pics]" title="点击复制"></i>
								</div>
							</td>
							<td>多图</td>
						</tr>
						<tr>
							<td></td>
							<td>content</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:content]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:content]" title="点击复制"></i>
								</div>
							</td>
							<td>内容</td>
						</tr>
						<tr>
							<td></td>
							<td>tags</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:tags]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:tags]" title="点击复制"></i>
								</div>
							</td>
							<td>标签</td>
						</tr>
						<tr>
							<td></td>
							<td>keywords</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:keywords]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:keywords]" title="点击复制"></i>
								</div>
							</td>
							<td>关键词</td>
						</tr>
						<tr>
							<td></td>
							<td>description</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:description]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:description]" title="点击复制"></i>
								</div>
							</td>
							<td>描述</td>
						</tr>
						<tr>
							<td></td>
							<td>sorting</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:sorting]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:sorting]" title="点击复制"></i>
								</div>
							</td>
							<td>排序</td>
						</tr>
						<tr>
							<td></td>
							<td>top</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:top]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:top]" title="点击复制"></i>
								</div>
							</td>
							<td>置顶</td>
						</tr>
						<tr>
							<td></td>
							<td>recommend</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:recommend]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:recommend]" title="点击复制"></i>
								</div>
							</td>
							<td>推荐</td>
						</tr>
						<tr>
							<td></td>
							<td>headline</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:headline]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:headline]" title="点击复制"></i>
								</div>
							</td>
							<td>头条</td>
						</tr>
						<tr>
							<td></td>
							<td>visit</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:visit]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:visit]" title="点击复制"></i>
								</div>
							</td>
							<td>访问量</td>
						</tr>
						<tr>
							<td></td>
							<td>like</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:like]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:like]" title="点击复制"></i>
								</div>
							</td>
							<td>点赞量</td>
						</tr>
						<tr>
							<td></td>
							<td>oppose</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:oppose]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:oppose]" title="点击复制"></i>
								</div>
							</td>
							<td>反对量</td>
						</tr>
						<tr>
							<td></td>
							<td>create_user</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:create_user]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:create_user]" title="点击复制"></i>
								</div>
							</td>
							<td>创建者</td>
						</tr>
						<tr>
							<td></td>
							<td>update_user</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:update_user]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:update_user]" title="点击复制"></i>
								</div>
							</td>
							<td>更新者</td>
						</tr>
						<tr>
							<td></td>
							<td>create_time</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:create_time]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:create_time]" title="点击复制"></i>
								</div>
							</td>
							<td>创建时间</td>
						</tr>
						<tr>
							<td></td>
							<td>update_time</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:update_time]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:update_time]" title="点击复制"></i>
								</div>
							</td>
							<td>更新时间</td>
						</tr>
						<tr>
							<td></td>
							<td>otherfile</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:otherfile]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:otherfile]" title="点击复制"></i>
								</div>
							</td>
							<td>其它附件</td>
						</tr>
						<tr>
							<td></td>
							<td>pictitles</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:pictitles]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:pictitles]" title="点击复制"></i>
								</div>
							</td>
							<td>图片对应标题 </td>
						</tr>
						<tr>
							<td></td>
							<td>扩展字段</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:扩展字段]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:扩展字段]" title="点击复制"></i>
								</div>
							</td>
							<td>扩展字段 </td>
						</tr>
						<tr>
							<td></td>
							<td>自定义字段</td>
							<td>
								<div class="label">
								<span class="getlabel">[list:自定义字段]</span>
								<i class="fa fa-file-text-o" aria-hidden="true" data-clipboard-text="[list:自定义字段]" title="点击复制"></i>
								</div>
							</td>
							<td>自定义字段 </td>
						</tr>
					</tbody>
				</table>
				<p>常用规则</p>
				<blockquote class="layui-elem-quote layui-quote-nm">
					[list:title len=10]<br>
					[list:content len=100]去除html标签后的截取长度<br>
					[list:create_time style=Y年m月d日]去除html标签后的截取长度<br>
					可按下列格式进行组合，间隔符自定义如-  , : 中文等<br>
					Y - 年，四位数字; 如: "1999"<br>
					y - 年，二位数字; 如: "99"<br>
					z - 一年中的第几天; 如: "0" 至 "365"<br>
					F - 月份，英文全名; 如: "January"<br>
					m - 月份，二位数字，若不足二位则在前面补零; 如: "01" 至 "12"<br>
					n - 月份，二位数字，若不足二位则不补零; 如: "1" 至 "12"<br>
					M - 月份，三个英文字母; 如: "Jan"<br>
					t - 指定月份的天数; 如: "28" 至 "31"<br>
					d - 几日，二位数字，若不足二位则前面补零; 如: "01" 至 "31"<br>
					j - 几日，二位数字，若不足二位不补零; 如: "1" 至 "31"<br>
					h - 12 小时制的小时; 如: "01" 至 "12"<br>
					H - 24 小时制的小时; 如: "00" 至 "23"<br>
					g - 12 小时制的小时，不足二位不补零; 如: "1" 至 12"<br>
					G - 24 小时制的小时，不足二位不补零; 如: "0" 至 "23"<br>
					i - 分钟; 如: "00" 至 "59"<br>
					s - 秒; 如: "00" 至 "59"<br>
					S - 字尾加英文序数，二个英文字母; 如: "th"，"nd"<br>
					U - 总秒数<br>
					D - 星期几，三个英文字母; 如: "Fri"<br>
					l - 星期几，英文全名; 如: "Friday"<br>
					w - 数字型的星期几，如: "0" (星期日) 至 "6" (星期六)<br>
					a - "am" 或是 "pm"<br>
					A - "AM" 或是 "PM"
				</blockquote>
			</div>
			<fieldset class="layui-elem-field layui-field-title site-title">
				<legend><a name="add">添加自定义字段</a></legend>
			</fieldset>
			<blockquote class="layui-elem-quote layui-quote-nm">
				我们添加了常用的内容字段，但并不一定能满足你的开发需求。你可以非常轻松地添加自定义字段。<br>
				自定义字段可以使用len,style<br>
				当然，你也可以在模型扩展字段里添加字段，注意：模型里添加的字段不能于上述content表字段重名。
			</blockquote>
			<div class="site-text">
				<p>1.在数据库content表添加自定义字段或者在模型里添加扩展字段</p>
				<blockquote class="layui-elem-quote layui-quote-nm">
					推荐使用phpmyadmin或navicat for mysql对数据库进行操作
				</blockquote>
				<p>2.在模板里添加自定义字段表单项</p>
				<blockquote class="layui-elem-quote layui-quote-nm">
					模板位置：\app\admin\Views\admin\html\content_edit.html<br>
					此处我们使用是js动态回填，你不必为自定义字段赋值<br>
					后台表单也无需处理，系统会自动将新添加字段值保存到数据库
				</blockquote>
				<p>3.调用自定义字段</p>
				<blockquote class="layui-elem-quote layui-quote-nm">
					[list:自定义字段]
				</blockquote>
			</div>
		</div>
</div>
</div>
<ul class="site-dir"></ul>
<script type="text/html" id="id">
    {{d.LAY_TABLE_INDEX+1}}
</script>
<script src="/index.php/Statistics/index/1/0"></script>
<script src="/template/default/js/jquery-1.11.3.min.js"></script>
<script src="/template/default/js/swiper.min.js"></script>
<script src="/template/default/js/swiper.animate.min.js"></script>
<script src="/template/default/js/wow.min.js"></script>
<script src="/static/layui/layui.all.js"></script>
<script src="/manual/js/clipboard.min.js"></script>
<script src="/manual/js/main.js"></script>
</body>
</html>